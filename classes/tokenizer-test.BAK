#INCLUDE json-fox.h 

*-* SET COVERAGE TO C:/Webconnectionprojects/WebNode/devtools/json-fox/classes/jsonfox.log

CLEAR
SET PROCEDURE TO classes\Tokenizer ADDITIVE
SET PROCEDURE TO classes\Parser ADDITIVE
SET PROCEDURE TO classes\Stringify ADDITIVE

LOCAL loTokenizer, lcJson, laTokens

* Create an instance of the Tokenizer class
loParser = CREATEOBJECT("Parser")
loTokenizer = CREATEOBJECT("Tokenizer")
loStringify = CREATEOBJECT("Stringify")

* Load the JSON file
lcJson = FILETOSTR("C:/Webconnectionprojects/WebNode/devtools/json-fox/classes/MyHtmlForm.json")
lcTypeJson = FILETOSTR("C:/Webconnectionprojects/WebNode/devtools/json-fox/classes/TypeTest.json") 

* Print to screen the 100 first step of the collection 
loObject = loTokenizer.tokenize(lcJson)

*-*FOR lnI = 240 TO 270
*-*	?? TRANSFORM(lnI) + loObject.Item(lnI) + " ... "
*-*ENDFOR 
 
IF LOWER(loObject.Item(3)) <> "title" .OR. loObject.Count <> 367 
	? "Tokenize error"
ENDIF 


* Parse the JSON
loObject = loParser .ParseJson(lcJson)



* Modify the object (example: change the title)
loObject.title = "Updated User Registration"

* Save the modified object back to a file
loStringify.saveToFile("C:/Webconnectionprojects/WebNode/devtools/json-fox/classes/UpdatedMyHtmlForm.json", loObject,.T.)

 
* Parse the JSON
loObject = loParser.ParseJson(lcTypeJson)
* Modify the object (example: change the title)
SET STEP ON 
? TRANSFORM(loObject.name)
? TRANSFORM(loObject.age)
? TRANSFORM(loObject.weight)
? TRANSFORM(loObject.isStudent)
? TRANSFORM(loObject.graduationDate)
? TRANSFORM(loObject.nullValue)


* Save the modified object back to a file
loStringify.saveToFile("C:/Webconnectionprojects/WebNode/devtools/json-fox/classes/UpdatedMyHtmlForm.json", loObject,.T.)

lcArrayJson = FILETOSTR("C:/Webconnectionprojects/WebNode/devtools/json-fox/classes/testarrays.json") 

* Parse the JSON
loObject = loParser.ParseJson(lcArrayJson)
SET STEP ON 
